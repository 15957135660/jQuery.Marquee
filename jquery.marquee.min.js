/**
 * jQuery.marquee - scrolling text horizontally
 * Date: 11/01/2013
 * @author Aamir Afridi - aamirafridi(at)gmail(dot)com / http://aamirafridi.com/jquery/jquery-marquee-plugin
 */
;(function(e){e.fn.marquee=function(t){return this.each(function(){var n=e.extend({},e.fn.marquee.defaults,t),r=e(this),i,s,o,u,a,f="animation-play-state",l=false,c=function(e,t,n){var r=["webkit","moz","MS","o",""];for(var i=0;i<r.length;i++){if(!r[i])t=t.toLowerCase();e.addEventListener(r[i]+t,n,false)}},h=function(e){var t=[];for(var n in e){if(e.hasOwnProperty(n)){t.push(n+":"+e[n])}}t.push();return"{"+t.join(",")+"}"},p={pause:function(){if(l&&n.allowCss3Support){i.css(f,"paused")}else{if(e.fn.pause){i.pause()}}r.data("runningStatus","paused");r.trigger("paused")},resume:function(){if(l&&n.allowCss3Support){i.css(f,"running")}else{if(e.fn.resume){i.resume()}}r.data("runningStatus","resumed");r.trigger("resumed")},toggle:function(){this[r.data("runningStatus")=="resumed"?"pause":"resume"]()},destroy:function(){clearTimeout(r.timer);r.css("visibility","hidden").html(r.find(".js-marquee:first"));setTimeout(function(){r.css("visibility","visible")},0)},startAnimationWithDelay:function(){r.timer=setTimeout(L,n.delayBeforeStart)}};if(typeof t==="string"){if(e.isFunction(p[t])){if(!i){i=r.find(".js-marquee-wrapper")}if(r.data("css3AnimationIsSupported")===true){l=true}p[t]()}return}var d={},v;e.each(n,function(e,t){v=r.attr("data-"+e);if(typeof v!=="undefined"){switch(v){case"true":v=true;break;case"false":v=false;break}n[e]=v}});n.duration=n.speed||n.duration;u=n.direction=="up"||n.direction=="down";n.gap=n.duplicated?n.gap:0;r.wrapInner('<div class="js-marquee"></div>');var m=r.find(".js-marquee").css({"margin-right":n.gap,"float":"left"});if(n.duplicated){m.clone().appendTo(r)}r.wrapInner('<div style="width:100000px" class="js-marquee-wrapper"></div>');i=r.find(".js-marquee-wrapper");if(u){var g=r.height();i.removeAttr("style");r.height(g);r.find(".js-marquee").css({"float":"none","margin-bottom":n.gap,"margin-right":0});if(n.duplicated)r.find(".js-marquee:last").css({"margin-bottom":0});var y=r.find(".js-marquee:first").height()+n.gap;n.duration=(parseInt(y,10)+parseInt(g,10))/parseInt(g,10)*n.duration}else{a=r.find(".js-marquee:first").width()+n.gap;s=r.width();n.duration=(parseInt(a,10)+parseInt(s,10))/parseInt(s,10)*n.duration}if(n.duplicated){n.duration=n.duration/2}if(n.allowCss3Support){var b=document.body||document.createElement("div"),w="marqueeAnimation-"+Math.floor(Math.random()*1e7),E="Webkit Moz O ms Khtml".split(" "),S="animation",x="",T=e("style"),N="";if(b.style.animation){N="@keyframes "+w+" ";l=true}if(l===false){for(var C=0;C<E.length;C++){if(b.style[E[C]+"AnimationName"]!==undefined){var k="-"+E[C].toLowerCase()+"-";S=k+S;f=k+f;N="@"+k+"keyframes "+w+" ";l=true;break}}}if(l){x=w+" "+n.duration/1e3+"s "+n.delayBeforeStart/1e3+"s infinite "+n.css3easing;r.data("css3AnimationIsSupported",true)}}var L=function(){if(u){if(n.duplicated){i.css("margin-top",n.direction=="up"?0:"-"+y+"px");o={"margin-top":n.direction=="up"?"-"+y+"px":0}}else{i.css("margin-top",n.direction=="up"?g+"px":"-"+y+"px");o={"margin-top":n.direction=="up"?"-"+i.height()+"px":g+"px"}}}else{if(n.duplicated){i.css("margin-left",n.direction=="left"?0:"-"+a+"px");o={"margin-left":n.direction=="left"?"-"+a+"px":0}}else{i.css("margin-left",n.direction=="left"?s+"px":"-"+a+"px");o={"margin-left":n.direction=="left"?"-"+a+"px":s+"px"}}}r.trigger("beforeStarting");if(l){i.css(S,x);var t=N+" { 100%  "+h(o)+"}";if(T.length!==0){T.filter(":last").append(t)}else{e("head").append("<style>"+t+"</style>")}c(i[0],"AnimationIteration",function(){r.trigger("finished")})}else{i.animate(o,n.duration,n.easing,function(){r.trigger("finished");if(n.pauseOnCycle){p.startAnimationWithDelay()}else{L()}})}r.data("runningStatus","resumed")};r.bind("pause",p.pause);r.bind("resume",p.resume);if(n.pauseOnHover){r.hover(p.pause,p.resume)}if(l&&n.allowCss3Support){L()}else{p.startAnimationWithDelay()}})};e.fn.marquee.defaults={allowCss3Support:true,css3easing:"linear",easing:"linear",delayBeforeStart:0,direction:"left",duplicated:false,duration:5e3,gap:20,pauseOnCycle:false,pauseOnHover:false}})(jQuery)
