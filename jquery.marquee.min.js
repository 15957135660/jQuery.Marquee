/**
 * jQuery.marquee - scrolling text horizontally
 * Date: 11/01/2013
 * @author Aamir Afridi - aamirafridi(at)gmail(dot)com / http://aamirafridi.com/jquery/jquery-marquee-plugin
 */
;(function(e){e.fn.marquee=function(t){return this.each(function(){var n=e.extend({},e.fn.marquee.defaults,t),r=e(this),i,s,o,u,a,f="animation-play-state",l=false,c=function(e,t,n){var r=["webkit","moz","MS","o",""];for(var i=0;i<r.length;i++){if(!r[i])t=t.toLowerCase();e.addEventListener(r[i]+t,n,false)}},h=function(e){var t=[];for(var n in e){if(e.hasOwnProperty(n)){t.push(n+":"+e[n])}}t.push();return"{"+t.join(",")+"}"},p=function(){r.timer=setTimeout(A,n.delayBeforeStart)},d={pause:function(){if(l&&n.allowCss3Support){i.css(f,"paused")}else{if(e.fn.pause){i.pause()}}r.data("runningStatus","paused");r.trigger("paused")},resume:function(){if(l&&n.allowCss3Support){i.css(f,"running")}else{if(e.fn.resume){i.resume()}}r.data("runningStatus","resumed");r.trigger("resumed")},toggle:function(){console.log(this);d[r.data("runningStatus")=="resumed"?"pause":"resume"]()},destroy:function(){clearTimeout(r.timer);r.css("visibility","hidden").html(r.find(".js-marquee:first"));setTimeout(function(){r.css("visibility","visible")},0)}};if(typeof t==="string"){if(e.isFunction(d[t])){if(!i){i=r.find(".js-marquee-wrapper")}if(r.data("css3AnimationIsSupported")===true){l=true}d[t]()}return}var v={},m;e.each(n,function(e,t){m=r.attr("data-"+e);if(typeof m!=="undefined"){switch(m){case"true":m=true;break;case"false":m=false;break}n[e]=m}});n.duration=n.speed||n.duration;u=n.direction=="up"||n.direction=="down";n.gap=n.duplicated?n.gap:0;r.wrapInner('<div class="js-marquee"></div>');var g=r.find(".js-marquee").css({"margin-right":n.gap,"float":"left"});if(n.duplicated){g.clone().appendTo(r)}r.wrapInner('<div style="width:100000px" class="js-marquee-wrapper"></div>');i=r.find(".js-marquee-wrapper");if(u){var y=r.height();i.removeAttr("style");r.height(y);r.find(".js-marquee").css({"float":"none","margin-bottom":n.gap,"margin-right":0});if(n.duplicated)r.find(".js-marquee:last").css({"margin-bottom":0});var b=r.find(".js-marquee:first").height()+n.gap;n.duration=(parseInt(b,10)+parseInt(y,10))/parseInt(y,10)*n.duration}else{a=r.find(".js-marquee:first").width()+n.gap;s=r.width();n.duration=(parseInt(a,10)+parseInt(s,10))/parseInt(s,10)*n.duration}if(n.duplicated){n.duration=n.duration/2}if(n.allowCss3Support){var w=document.body||document.createElement("div"),E="marqueeAnimation-"+Math.floor(Math.random()*1e7),S="Webkit Moz O ms Khtml".split(" "),x="animation",T="",N=e("style"),C="";if(w.style.animation){C="@keyframes "+E+" ";l=true}if(l===false){for(var k=0;k<S.length;k++){if(w.style[S[k]+"AnimationName"]!==undefined){var L="-"+S[k].toLowerCase()+"-";x=L+x;f=L+f;C="@"+L+"keyframes "+E+" ";l=true;break}}}if(l){T=E+" "+n.duration/1e3+"s "+n.delayBeforeStart/1e3+"s infinite "+n.css3easing;r.data("css3AnimationIsSupported",true)}}var A=function(){if(u){if(n.duplicated){i.css("margin-top",n.direction=="up"?0:"-"+b+"px");o={"margin-top":n.direction=="up"?"-"+b+"px":0}}else{i.css("margin-top",n.direction=="up"?y+"px":"-"+b+"px");o={"margin-top":n.direction=="up"?"-"+i.height()+"px":y+"px"}}}else{if(n.duplicated){i.css("margin-left",n.direction=="left"?0:"-"+a+"px");o={"margin-left":n.direction=="left"?"-"+a+"px":0}}else{i.css("margin-left",n.direction=="left"?s+"px":"-"+a+"px");o={"margin-left":n.direction=="left"?"-"+a+"px":s+"px"}}}r.trigger("beforeStarting");if(l){i.css(x,T);var t=C+" { 100%  "+h(o)+"}";if(N.length!==0){N.filter(":last").append(t)}else{e("head").append("<style>"+t+"</style>")}c(i[0],"AnimationIteration",function(){r.trigger("finished")})}else{i.animate(o,n.duration,n.easing,function(){r.trigger("finished");if(n.pauseOnCycle){p()}else{A()}})}r.data("runningStatus","resumed")};r.bind("pause",d.pause);r.bind("resume",d.resume);if(n.pauseOnHover){r.bind("mouseenter mouseleave",d.toggle)}if(l&&n.allowCss3Support){A()}else{p()}})};e.fn.marquee.defaults={allowCss3Support:true,css3easing:"linear",easing:"linear",delayBeforeStart:0,direction:"left",duplicated:false,duration:5e3,gap:20,pauseOnCycle:false,pauseOnHover:false}})(jQuery)
